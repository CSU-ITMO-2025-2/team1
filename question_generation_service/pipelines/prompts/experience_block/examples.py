experience_block_examples =  [
    {
        "input": {
            "vacancy_text": (
                "Ищем Python Backend Engineer (Django/FastAPI). Must-have: Django 3+, "
                "PostgreSQL, REST, pytest, Celery, Redis, асинхронность (FastAPI/asyncio), "
                "Docker, CI/CD. Nice-to-have: Kubernetes, Grafana/Prometheus. Формат — гибрид: 2 дня в офисе (Москва)."
            ),
            "resume_text": (
                "Python-разработчик, 2.5 года. Основные проекты на Flask; есть pet-проекты на Django. "
                "Делал REST API, работал с PostgreSQL. Docker — базово. Тесты писал точечно. "
                "Асинхронность не использовал. Celery не применял. В инцидентах участвовал как исполнитель, "
                "деталей немного. Предпочитает полный ремоут, планирует через год перейти в Data Science."
            ),
            "work_experience_evaluation": {
                "summary": "Опыт продакшн-Django < 1 года; нет примеров high-load, фоновых задач; размыта роль в инцидентах.",
                "risks": [
                    "Недостаточный опыт с асинхронными сервисами/высокими нагрузками",
                    "Нет практики фоновых задач/очередей (Celery/Redis)",
                    "Неясная роль в инцидентах (ownership/координация)"
                ],
                "evidence": {
                    "django_prod_months": 10,
                    "async_projects": 0,
                    "celery_usage": False
                }
            },
            "professional_skills_evaluation": {
                "must_have": {
                    "django": "half",
                    "asyncio_fastapi": "gap",
                    "celery": "gap",
                    "pytest": "gap",
                    "postgresql": "current",
                    "docker": "half",
                    "rest": "current",
                    "ci_cd": "half"
                },
                "nice_to_have": {
                    "kubernetes": "half",
                    "grafana_prometheus": "half"
                }
            }
        },
        "output": {
            "professional_skills": {
                "questions": {
                    "q_1": {
                        "question": "Опишите ваш опыт оптимизации запросов в Django ORM: где применяли select_related/prefetch_related, какие метрики или профайлеры использовали и какой прирост получили?",
                        "details": "Проверяем must-have по Django (оценка: half из professional_skills_evaluation) и глубину владения ORM. Во входе продакшн-опыт по Django < 1 года (work_experience_evaluation). Ожидаем конкретные метрики и инструменты профилирования."
                    },
                    "q_2": {
                        "question": "Как бы вы реализовали асинхронный эндпоинт в FastAPI, который обращается к внешнему API и в базу? Какие таймауты, пулы соединений и риски конкурентного доступа учтёте?",
                        "details": "Gap по asyncio/FastAPI (professional_skills_evaluation.must_have.asyncio_fastapi='gap'). В резюме асинхронности нет. Ожидаем понимание I/O-bound операций, timeouts, connection pooling, транзакций."
                    }
                }
            },
            "practical_examples": {
                "questions": {
                    "q_1": {
                        "question": "Приведите схему пайплайна фоновой обработки задач на Celery+Redis для генерации отчётов: как организуете ретраи, backoff, дедлайны и мониторинг задержек?",
                        "details": "Gap по Celery (professional_skills_evaluation). В work_experience_evaluation указано отсутствие фоновых задач. Ожидаем практичную архитектуру, политику ретраев и подход к наблюдаемости."
                    },
                    "q_2": {
                        "question": "Расскажите о конкретном улучшении производительности API: исходные метрики (RPS/latency), узкое место, изменения и итоговая динамика.",
                        "details": "Риск по high-load (work_experience_evaluation.risks). Требуется проверить умение работать с метриками и узкими местами (N+1, индексы, кэш)."
                    }
                }
            },
            "past_situations": {
                "questions": {
                    "q_1": {
                        "question": "Опишите инцидент с деградацией сервиса: ваша роль, таймлайн действий, взаимодействие с DevOps/QA и какие action items зафиксировали в пост-морте?",
                        "details": "Work_experience_evaluation отмечает неясную роль в инцидентах. Ожидаем структурный разбор (эскалация, RCA, согласованные шаги)."
                    },
                    "q_2": {
                        "question": "Вспомните конфликт качества vs сроки перед релизом: какие компромиссы предложили, как аргументировали и как зафиксировали решение?",
                        "details": "Проверяем ownership и коммуникацию при релизах. Источник — риск размытых границ ответственности (work_experience_evaluation)."
                    }
                }
            },
            "career_goals": {
                "questions": {
                    "q_1": {
                        "question": "Как планируете развиваться в backend в горизонте 12 месяцев, если рассматриваете переход в Data Science? Какие KPI на 6 месяцев готовы зафиксировать по backend-навыкам?",
                        "details": "Разрыв по карьерному фокусу (резюме). Ожидаем реалистичный план развития, согласованный с ролью backend."
                    },
                    "q_2": {
                        "question": "Готовы ли вы к гибридному формату (2 дня в офисе)? Какие условия необходимы, чтобы это работало устойчиво для вас и команды?",
                        "details": "Несоответствие по формату (вакансия — гибрид, резюме — ремоут). Требуется понять ограничения и компромиссы."
                    }
                }
            }
        }
    },
    {
        "input": {
            "vacancy_text": (
                "Data Analyst (продуктовая аналитика). Must-have: SQL (оконные функции), "
                "Python (pandas), визуализация (Looker/Power BI), A/B-тесты (дизайн, p-value, power), "
                "основы ETL/Airflow, коммуникации со стейкхолдерами."
            ),
            "resume_text": (
                "Аналитик данных, 1.5 года. Сильный Excel, базовый SQL (SELECT/JOIN). "
                "Power BI — несколько дашбордов. Python использовал эпизодически для очистки данных. "
                "A/B-тесты не проектировал. ETL/Airflow не делал. Коммуникации со стейкхолдерами — через тимлида."
            ),
            "work_experience_evaluation": {
                "summary": "Нет end-to-end кейсов от сырья до дашборда; слабая самостоятельная коммуникация с заказчиками.",
                "risks": [
                    "Отсутствие опыта проектирования A/B-тестов и интерпретации результатов",
                    "Нет практики оркестрации расчётов (Airflow/ETL)",
                    "Ограниченные прямые коммуникации со стейкхолдерами"
                ],
                "evidence": {
                    "ab_tests": 0,
                    "airflow_dags": 0,
                    "stakeholder_calls_direct": "редко"
                }
            },
            "professional_skills_evaluation": {
                "must_have": {
                    "sql_windows": "gap",
                    "python_pandas": "half",
                    "ab_testing": "gap",
                    "airflow": "gap"
                },
                "nice_to_have": {
                    "looker": "half",
                    "power_bi": "current"
                }
            }
        },
        "output": {
            "professional_skills": {
                "questions": {
                    "q_1": {
                        "question": "Как с помощью оконных функций посчитать 7-дневный rolling DAU и долю возвращающихся пользователей? Приведите SQL-скетч и обоснуйте выбор рамки окна.",
                        "details": "Gap по SQL windows (professional_skills_evaluation). В резюме — базовый SQL. Ожидаем владение PARTITION BY/ORDER BY и оконной рамкой."
                    },
                    "q_2": {
                        "question": "Опишите пайплайн в pandas от сырых логов до витрины метрик: обработка типов, пропусков, дубликатов и валидация схемы.",
                        "details": "Оценка pandas: half. Проверяем практические шаги качества данных, критичные для продуктовой аналитики."
                    }
                }
            },
            "practical_examples": {
                "questions": {
                    "q_1": {
                        "question": "Приведите end-to-end пример: источник данных → трансформации → дашборд. Какие ключевые метрики, как проверяли корректность и кто был заказчиком?",
                        "details": "Work_experience_evaluation: нет сквозных кейсов. Требуем описание цепочки и контроля качества."
                    },
                    "q_2": {
                        "question": "Как бы вы реализовали ежедневный расчёт метрик в Airflow: структура DAG, идемпотентность, ретраи и алерты при сбоях?",
                        "details": "Gap по Airflow/ETL. Ожидаем понимание расписаний, зависимостей, retry/backoff и мониторинга."
                    }
                }
            },
            "past_situations": {
                "questions": {
                    "q_1": {
                        "question": "Расскажите про кейс с расплывчатым запросом стейкхолдера: как уточняли гипотезу, критерии успеха и сроки? Как фиксировали договорённости?",
                        "details": "Work_experience_evaluation указывает ограниченные прямые коммуникации. Проверяем самостоятельность и структурирование ожиданий."
                    },
                    "q_2": {
                        "question": "Опишите ситуацию конкурирующих приоритетов по задачам: какие критерии применили для приоритезации и как согласовали ожидания с заказчиками?",
                        "details": "Риск по приоритизации и коммуникации. Ожидаем прозрачный фрейм принятия решений."
                    }
                }
            },
            "career_goals": {
                "questions": {
                    "q_1": {
                        "question": "Как планируете усилить компетенции именно в продуктовой аналитике (эксперименты, метрики, интерпретация) в ближайшие 3–6 месяцев?",
                        "details": "Несоответствие фокуса: сейчас упор на BI. Нужен план развития под требования роли."
                    },
                    "q_2": {
                        "question": "Какие типы A/B-тестов видите первоочередными для нашего продукта и почему? На какие метрики и риски (power, MDE) обратите внимание?",
                        "details": "Gap по A/B-тестам. Проверяем понимание дизайна экспериментов и бизнес-интерпретации."
                    }
                }
            }
        }
    }
]

