# resume_evaluation_service/pipelines/work_exp_evaluation/runner.py
"""
–§–∏–Ω–∞–ª—å–Ω—ã–π runner: –∏–∑–≤–ª–µ–∫–∞–µ—Ç –æ–ø—ã—Ç -> —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è -> —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å -> –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç.
"""

import asyncio
import sys
from typing import Any, Dict, Optional

from utils.logger import setup_logger
from pipelines.work_exp_evaluation.extract_work_exp import get_work_exp as get_resume_work_exp
from pipelines.work_exp_evaluation.extract_work_reqs import get_work_reqs
from pipelines.work_exp_evaluation.get_report import evaluate_work_experience_match
from pipelines.work_exp_evaluation.work_relevance import get_work_exp_relevance

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logger = setup_logger(__name__)


async def evaluate_work_experience_pipeline(
    resume_text: str, vacancy_text: str
) -> Dict[str, Any]:
    """
    –ü–æ–ª–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ—Ü–µ–Ω–∫–∏ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã.

    Args:
        resume_text: –¢–µ–∫—Å—Ç —Ä–µ–∑—é–º–µ.
        vacancy_text: –¢–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏.

    Returns:
        –°–ª–æ–≤–∞—Ä—å —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –æ—Ç—á—ë—Ç–æ–º –ø–æ –æ–ø—ã—Ç—É —Ä–∞–±–æ—Ç—ã.
    """
    logger.info("–ó–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞ –æ—Ü–µ–Ω–∫–∏ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã")

    try:
        # 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ –∏–∑ —Ä–µ–∑—é–º–µ
        logger.info("–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã –∏–∑ —Ä–µ–∑—é–º–µ")
        resume_work_task = get_resume_work_exp(resume_text)

        # 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –æ–ø—ã—Ç—É –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏
        logger.info("–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –æ–ø—ã—Ç—É –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏")
        vacancy_reqs_task = get_work_reqs(vacancy_text)

        # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á
        parsing_results = await asyncio.gather(
            resume_work_task,
            vacancy_reqs_task,
            return_exceptions=True,
        )

        resume_work_exp, vacancy_work_reqs = parsing_results

    except Exception as e:
        logger.error(
            f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: {str(e)}", exc_info=True
        )
        return {"status": "failed"}

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã
    if resume_work_exp is None or resume_work_exp.get("status") == "failed":
        logger.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –∏–∑ —Ä–µ–∑—é–º–µ")
        return {"status": "failed"}

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –æ–ø—ã—Ç—É —Ä–∞–±–æ—Ç—ã –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏
    if vacancy_work_reqs is None or vacancy_work_reqs.get("status") == "failed":
        logger.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–ø—ã—Ç—É —Ä–∞–±–æ—Ç—ã –∏–∑ –≤–∞–∫–∞–Ω—Å–∏–∏")
        return {"status": "failed"}

    # 3. –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–ø—ã—Ç–∞
    logger.info("–û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–∏")
    try:
        relevance_result = await get_work_exp_relevance(
            resume_work_exp, vacancy_text
        )

    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–ø—ã—Ç–∞: {e}", exc_info=True)
        return {"status": "failed"}

    # 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
    logger.info("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ –ø–æ –æ–ø—ã—Ç—É —Ä–∞–±–æ—Ç—ã")
    try:
        final_report = evaluate_work_experience_match(
            resume_work_exp=resume_work_exp,
            vacancy_required_exp=vacancy_work_reqs,
            relevance_result=relevance_result,
        )
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –æ—Ç—á–µ—Ç–∞
        if final_report is None or final_report.get("status") != "success":
            logger.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –æ—Ç—á–µ—Ç –ø–æ –æ–ø—ã—Ç—É —Ä–∞–±–æ—Ç—ã")
            return {"status": "failed"}
        
        logger.info("–ü–∞–π–ø–ª–∞–π–Ω –æ—Ü–µ–Ω–∫–∏ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ")
        return final_report
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞: {e}", exc_info=True)
        return {"error": f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞: {e}", "evaluation": None}


def evaluate_work_experience_pipeline_sync(
    resume_text: str, vacancy_text: str
) -> Dict[str, Any]:
    """–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –ø–∞–π–ø–ª–∞–π–Ω–∞."""
    return asyncio.run(evaluate_work_experience_pipeline(resume_text, vacancy_text))


# === –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ if __name__ == "__main__" ===
if __name__ == "__main__":
    # –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ)
    TEST_RESUME = """
    –§–ò–û: –ò–≤–∞–Ω–æ–≤ –°–µ—Ä–≥–µ–π –ü–µ—Ç—Ä–æ–≤–∏—á
    –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: 15.04.1992
    –ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞
    –ö–æ–Ω—Ç–∞–∫—Ç—ã: +7 (900) 123-45-67, ivanov@example.com

    –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
    2010‚Äì2014 ‚Äî –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –∏–º. –ù.–≠. –ë–∞—É–º–∞–Ω–∞
    –§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏ –∏ —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –±–∞–∫–∞–ª–∞–≤—Ä –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é ¬´–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è¬ª.
    2014‚Äì2016 ‚Äî –ú–ì–£ –∏–º. –ú.–í. –õ–æ–º–æ–Ω–æ—Å–æ–≤–∞
    –ú–∞–≥–∏—Å—Ç—Ä –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é ¬´–ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞¬ª.

    –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:
    1. –û–û–û ¬´–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞¬ª (06.2016 ‚Äì 09.2019) ‚Äî –ò–Ω–∂–µ–Ω–µ—Ä-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç
    –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
    - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Python (Django, Flask).
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
    –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
    - –°–æ–∫—Ä–∞—Ç–∏–ª –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ 25% –∑–∞ —Å—á—ë—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è.

    2. Google (10.2019 ‚Äì 12.2022) ‚Äî Senior Backend Developer
    –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
    - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Python –∏ Go.
    - –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ REST API –∏ gRPC —Å–µ—Ä–≤–∏—Å–æ–≤.
    - –†–∞–±–æ—Ç–∞ —Å Kubernetes, Docker, CI/CD (Jenkins, GitLab CI).
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, Grafana).
    –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
    - –†—É–∫–æ–≤–æ–¥–∏–ª –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ 5 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ –ø—Ä–æ–µ–∫—Ç –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é API (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ 300%).

    3. –Ø–Ω–¥–µ–∫—Å (01.2023 ‚Äì –Ω.–≤.) ‚Äî Team Lead Backend
    –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ 8 —á–µ–ª–æ–≤–µ–∫.
    - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
    - –í–Ω–µ–¥—Ä–µ–Ω–∏–µ ML-–º–æ–¥–µ–ª–µ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω (FastAPI + MLflow).
    - –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π.
    –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
    - –í–Ω–µ–¥—Ä–∏–ª –ø–∞–π–ø–ª–∞–π–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è ML-–º–æ–¥–µ–ª–µ–π, —á—Ç–æ —Å–æ–∫—Ä–∞—Ç–∏–ª–æ –≤—Ä–µ–º—è —Ä–µ–ª–∏–∑–∞ —Å 2 –Ω–µ–¥–µ–ª—å –¥–æ 3 –¥–Ω–µ–π.

    –ù–∞–≤—ã–∫–∏:
    - –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: Python, Go, JavaScript.
    - –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: PostgreSQL, MongoDB, Redis.
    - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Docker, Kubernetes, Kafka, RabbitMQ.
    - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Git, Linux, Prometheus, Grafana.
    - Soft Skills: –õ–∏–¥–µ—Ä—Å—Ç–≤–æ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –º–µ–Ω—Ç–æ—Ä–∏–Ω–≥.

    –ü—Ä–æ–µ–∫—Ç—ã:
    - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è e-commerce —Å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–ø—Ä–æ—Å–∞.
    - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
    """

    TEST_VACANCY = """
    –ö–æ–º–ø–∞–Ω–∏—è: –û–û–û ¬´–¢–µ—Ö–Ω–æ–°–æ—Ñ—Ç¬ª
    –í–∞–∫–∞–Ω—Å–∏—è: Senior Backend Developer / Team Lead

    –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
    - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (5‚Äì8 —á–µ–ª–æ–≤–µ–∫).
    - –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.
    - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Python (FastAPI, Django) –∏ Go.
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ML-–º–æ–¥–µ–ª–µ–π –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.
    - –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–¥-—Ä–µ–≤—å—é.

    –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
    - –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –æ—Ç 5 –ª–µ—Ç.
    - –ì–ª—É–±–æ–∫–æ–µ –∑–Ω–∞–Ω–∏–µ Python –∏ –æ–¥–Ω–æ–≥–æ –∏–∑ —è–∑—ã–∫–æ–≤ Go/Java.
    - –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å PostgreSQL –∏ MongoDB.
    - –ù–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å Docker, Kubernetes, Kafka.
    - –û–ø—ã—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API –∏ —Ä–∞–±–æ—Ç—ã —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏.
    - –£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π –æ–ø—ã—Ç ‚Äî –æ—Ç 1 –≥–æ–¥–∞.

    –ë—É–¥–µ—Ç –ø–ª—é—Å–æ–º:
    - –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å ML-–º–æ–¥–µ–ª—è–º–∏ –∏ –∏—Ö –¥–µ–ø–ª–æ–µ–º.
    - –ó–Ω–∞–Ω–∏–µ CI/CD, Prometheus, Grafana.

    –£—Å–ª–æ–≤–∏—è:
    - –ó–∞—Ä–ø–ª–∞—Ç–∞: –æ—Ç 300 000 —Ä—É–±. (gross)
    - –ì–∏–±—Ä–∏–¥–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫, –æ—Ñ–∏—Å –≤ –ú–æ—Å–∫–≤–µ.
    - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞, –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è.
    """

    async def run_test():
        print("\nüöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ evaluate_work_experience_pipeline\n")
        print("–†–µ–∑—é–º–µ (–ø—Ä–∏–º–µ—Ä):")
        print(TEST_RESUME[:200] + "...")
        print("\n–í–∞–∫–∞–Ω—Å–∏—è (–ø—Ä–∏–º–µ—Ä):")
        print(TEST_VACANCY[:100] + "...")
        print("-" * 60)

        try:
            report = await evaluate_work_experience_pipeline(TEST_RESUME, TEST_VACANCY)

            print("\n–û—Ç—á–µ—Ç:")
            print(report)
        except Exception as e:
            print(f"üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞: {e}")

    try:
        asyncio.run(run_test())
    except KeyboardInterrupt:
        print("\n‚õî –¢–µ—Å—Ç –ø—Ä–µ—Ä–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.")
        sys.exit(0)
    except Exception as e:
        print(f"\nüí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤: {e}")
        sys.exit(1)
